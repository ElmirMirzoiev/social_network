{"ast":null,"code":"import { FOLLOW_USER, UNFOLLOW_USER, SET_CURRENT_PAGE, SET_USERS_DATA, TOGGLE_FOLLOW_IN_PROGRESS, TOGGLE_IS_LOADING } from '../types';\nimport { usersAPI } from '../../API/usersAPI';\nconst initialState = {\n  users: [],\n  pageSize: 21,\n  error: null,\n  totalCount: null,\n  currentPage: 1,\n  isLoading: false,\n  followInProgress: []\n};\n\nconst usersReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case FOLLOW_USER:\n      return { ...state,\n        users: state.users.map(users => {\n          if (users.id === action.id) {\n            return { ...users,\n              followed: true\n            };\n          }\n\n          return users;\n        })\n      };\n\n    case UNFOLLOW_USER:\n      return { ...state,\n        users: state.users.map(users => {\n          if (users.id === action.id) {\n            return { ...users,\n              followed: false\n            };\n          }\n\n          return users;\n        })\n      };\n\n    case SET_USERS_DATA:\n      return { ...state,\n        users: action.users,\n        totalCount: action.totalCount\n      };\n\n    case SET_CURRENT_PAGE:\n      return { ...state,\n        currentPage: action.currentPage\n      };\n\n    case TOGGLE_IS_LOADING:\n      return { ...state,\n        isLoading: action.isLoading\n      };\n\n    case TOGGLE_FOLLOW_IN_PROGRESS:\n      return { ...state,\n        followInProgress: action.isFetching ? [...state.followInProgress, action.id] : state.followInProgress.filter(id => id !== action.id)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const follow = id => ({\n  type: FOLLOW_USER,\n  id\n});\nexport const unfollow = id => ({\n  type: UNFOLLOW_USER,\n  id\n});\nexport const setUsersData = (users, totalCount) => ({\n  type: SET_USERS_DATA,\n  users,\n  totalCount\n});\nexport const setCurrentPage = currentPage => ({\n  type: SET_CURRENT_PAGE,\n  currentPage\n});\nexport const toggleIsLoading = isLoading => ({\n  type: TOGGLE_IS_LOADING,\n  isLoading\n});\nexport const toggleFollowInProgress = (isFetching, id) => ({\n  type: TOGGLE_FOLLOW_IN_PROGRESS,\n  isFetching,\n  id\n});\nexport const setUsersThunk = currentPage => {\n  return dispatch => {\n    dispatch(toggleIsLoading(true));\n    usersAPI.getUsersData(currentPage).then(data => {\n      dispatch(setUsersData(data.items, data.totalCount));\n      setTimeout(() => {\n        dispatch(toggleIsLoading(false));\n      }, 500);\n    });\n  };\n};\nexport const followUserThunk = id => {\n  return dispatch => {\n    dispatch(toggleFollowInProgress(true, id));\n    usersAPI.followUser(id).then(response => {\n      if (response.data.resultCode === 0) {\n        dispatch(follow(id));\n        dispatch(toggleFollowInProgress(false, id));\n      }\n    });\n  };\n};\nexport const unfollowUserThunk = id => {\n  return dispatch => {\n    dispatch(toggleFollowInProgress(true, id));\n    usersAPI.unfollowUser(id).then(response => {\n      if (response.data.resultCode === 0) {\n        dispatch(unfollow(id));\n        dispatch(toggleFollowInProgress(false, id));\n      }\n    });\n  };\n};\nexport default usersReducer;","map":{"version":3,"sources":["/Users/elmir_mirzoiev/FrontEnd/social_network/src/store/Reducers/userReducer.js"],"names":["FOLLOW_USER","UNFOLLOW_USER","SET_CURRENT_PAGE","SET_USERS_DATA","TOGGLE_FOLLOW_IN_PROGRESS","TOGGLE_IS_LOADING","usersAPI","initialState","users","pageSize","error","totalCount","currentPage","isLoading","followInProgress","usersReducer","state","action","type","map","id","followed","isFetching","filter","follow","unfollow","setUsersData","setCurrentPage","toggleIsLoading","toggleFollowInProgress","setUsersThunk","dispatch","getUsersData","then","data","items","setTimeout","followUserThunk","followUser","response","resultCode","unfollowUserThunk","unfollowUser"],"mappings":"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","sourcesContent":["import {\n    FOLLOW_USER,\n    UNFOLLOW_USER,\n    SET_CURRENT_PAGE,\n    SET_USERS_DATA, TOGGLE_FOLLOW_IN_PROGRESS,\n    TOGGLE_IS_LOADING,\n} from '../types';\nimport {usersAPI} from '../../API/usersAPI';\n\nconst initialState = {\n    users: [],\n    pageSize: 21,\n    error: null,\n    totalCount: null,\n    currentPage: 1,\n    isLoading: false,\n    followInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n    switch (action.type) {\n\n        case FOLLOW_USER:\n            return {\n                ...state,\n                users: state.users.map(users => {\n                    if (users.id === action.id) {\n                        return {...users, followed: true}\n                    }\n                    return users;\n                })\n            }\n        case UNFOLLOW_USER:\n            return {\n                ...state,\n                users: state.users.map(users => {\n                    if (users.id === action.id) {\n                        return {...users, followed: false}\n                    }\n                    return users;\n                })\n            }\n        case SET_USERS_DATA:\n            return {\n                ...state,\n                users: action.users,\n                totalCount: action.totalCount\n            }\n        case SET_CURRENT_PAGE:\n            return {\n                ...state,\n                currentPage: action.currentPage\n            }\n        case TOGGLE_IS_LOADING:\n            return {\n                ...state,\n                isLoading: action.isLoading\n            }\n        case TOGGLE_FOLLOW_IN_PROGRESS:\n            return {\n                ...state,\n                followInProgress: action.isFetching\n                    ? [...state.followInProgress, action.id]\n                    : state.followInProgress.filter(id => id !== action.id)\n            }\n        default:\n            return state;\n    }\n\n}\n\nexport const follow = (id) => ({type: FOLLOW_USER, id})\nexport const unfollow = (id) => ({type: UNFOLLOW_USER, id})\nexport const setUsersData = (users, totalCount) => ({type: SET_USERS_DATA, users, totalCount})\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage})\nexport const toggleIsLoading = (isLoading) => ({type: TOGGLE_IS_LOADING, isLoading})\nexport const toggleFollowInProgress = (isFetching, id) => ({type: TOGGLE_FOLLOW_IN_PROGRESS, isFetching, id})\n\nexport const setUsersThunk = (currentPage) => {\n    return (dispatch) => {\n        dispatch(toggleIsLoading(true))\n        usersAPI.getUsersData(currentPage).then(data => {\n            dispatch(setUsersData(data.items, data.totalCount))\n            setTimeout(() => {\n                dispatch(toggleIsLoading(false))\n            }, 500)\n        })\n    }\n};\n\nexport const followUserThunk = (id) => {\n    return (dispatch) => {\n        dispatch(toggleFollowInProgress(true, id))\n        usersAPI.followUser(id).then(response => {\n            if (response.data.resultCode === 0) {\n                dispatch(follow(id))\n                dispatch(toggleFollowInProgress(false, id))\n            }\n        })\n    }\n};\n\nexport const unfollowUserThunk = (id) => {\n    return (dispatch) => {\n        dispatch(toggleFollowInProgress(true, id))\n        usersAPI.unfollowUser(id).then(response => {\n            if (response.data.resultCode === 0) {\n                dispatch(unfollow(id))\n                dispatch(toggleFollowInProgress(false, id))\n            }\n        })\n    }\n};\n\n\nexport default usersReducer;"]},"metadata":{},"sourceType":"module"}